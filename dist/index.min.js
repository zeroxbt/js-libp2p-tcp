"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PTcp = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2PTcp=(()=>{var Wi=Object.create;var Ee=Object.defineProperty;var Yi=Object.getOwnPropertyDescriptor;var Ji=Object.getOwnPropertyNames;var Ki=Object.getPrototypeOf,Qi=Object.prototype.hasOwnProperty;var Dt=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nt=(e,t)=>{for(var r in t)Ee(e,r,{get:t[r],enumerable:!0})},xn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ji(t))!Qi.call(e,i)&&i!==r&&Ee(e,i,{get:()=>t[i],enumerable:!(n=Yi(t,i))||n.enumerable});return e};var N=(e,t,r)=>(r=e!=null?Wi(Ki(e)):{},xn(t||!e||!e.__esModule?Ee(r,"default",{value:e,enumerable:!0}):r,e)),tu=e=>xn(Ee({},"__esModule",{value:!0}),e);var to=P((ep,Qn)=>{Qn.exports=_r;var Kn=128,ya=127,wa=~ya,va=Math.pow(2,31);function _r(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw _r.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=va;)t[r++]=e&255|Kn,e/=128;for(;e&wa;)t[r++]=e&255|Kn,e>>>=7;return t[r]=e|0,_r.bytes=r-n+1,t}});var no=P((rp,ro)=>{ro.exports=Nr;var Ea=128,eo=127;function Nr(e,n){var r=0,n=n||0,i=0,c=n,p,D=e.length;do{if(c>=D||i>49)throw Nr.bytes=0,new RangeError("Could not decode varint");p=e[c++],r+=i<28?(p&eo)<<i:(p&eo)*Math.pow(2,i),i+=7}while(p>=Ea);return Nr.bytes=c-n,r}});var so=P((np,oo)=>{var Ca=Math.pow(2,7),xa=Math.pow(2,14),Ta=Math.pow(2,21),Sa=Math.pow(2,28),Aa=Math.pow(2,35),Ia=Math.pow(2,42),Ba=Math.pow(2,49),Ra=Math.pow(2,56),Ma=Math.pow(2,63);oo.exports=function(e){return e<Ca?1:e<xa?2:e<Ta?3:e<Sa?4:e<Aa?5:e<Ia?6:e<Ba?7:e<Ra?8:e<Ma?9:10}});var Oe=P((op,io)=>{io.exports={encode:to(),decode:no(),encodingLength:so()}});var pe=P((Ep,Do)=>{"use strict";function mo(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Xa(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return mo(e,r)}catch{r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),mo(new i,r)}}Do.exports=Xa});var Bo=P((_p,Io)=>{var Yt=1e3,Jt=Yt*60,Kt=Jt*60,kt=Kt*24,sc=kt*7,ic=kt*365.25;Io.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return uc(e);if(r==="number"&&isFinite(e))return t.long?cc(e):ac(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function uc(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ic;case"weeks":case"week":case"w":return r*sc;case"days":case"day":case"d":return r*kt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Kt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Jt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Yt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ac(e){var t=Math.abs(e);return t>=kt?Math.round(e/kt)+"d":t>=Kt?Math.round(e/Kt)+"h":t>=Jt?Math.round(e/Jt)+"m":t>=Yt?Math.round(e/Yt)+"s":e+"ms"}function cc(e){var t=Math.abs(e);return t>=kt?ke(e,t,kt,"day"):t>=Kt?ke(e,t,Kt,"hour"):t>=Jt?ke(e,t,Jt,"minute"):t>=Yt?ke(e,t,Yt,"second"):e+" ms"}function ke(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Zr=P((Np,Ro)=>{function fc(e){r.debug=r,r.default=r,r.coerce=b,r.disable=c,r.enable=i,r.enabled=p,r.humanize=Bo(),r.destroy=C,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let d=0;for(let g=0;g<f.length;g++)d=(d<<5)-d+f.charCodeAt(g),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(f){let d,g=null,v,m;function S(...I){if(!S.enabled)return;let x=S,A=Number(new Date),_=A-(d||A);x.diff=_,x.prev=d,x.curr=A,d=A,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let L=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(K,W)=>{if(K==="%%")return"%";L++;let Q=r.formatters[W];if(typeof Q=="function"){let at=I[L];K=Q.call(x,at),I.splice(L,1),L--}return K}),r.formatArgs.call(x,I),(x.log||r.log).apply(x,I)}return S.namespace=f,S.useColors=r.useColors(),S.color=r.selectColor(f),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(v!==r.namespaces&&(v=r.namespaces,m=r.enabled(f)),m),set:I=>{g=I}}),typeof r.init=="function"&&r.init(S),S}function n(f,d){let g=r(this.namespace+(typeof d>"u"?":":d)+f);return g.log=this.log,g}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d,g=(typeof f=="string"?f:"").split(/[\s,]+/),v=g.length;for(d=0;d<v;d++)!g[d]||(f=g[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function c(){let f=[...r.names.map(D),...r.skips.map(D).map(d=>"-"+d)].join(",");return r.enable(""),f}function p(f){if(f[f.length-1]==="*")return!0;let d,g;for(d=0,g=r.skips.length;d<g;d++)if(r.skips[d].test(f))return!1;for(d=0,g=r.names.length;d<g;d++)if(r.names[d].test(f))return!0;return!1}function D(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function b(f){return f instanceof Error?f.stack||f.message:f}function C(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ro.exports=fc});var Mo=P((ot,$e)=>{ot.formatArgs=lc;ot.save=hc;ot.load=dc;ot.useColors=pc;ot.storage=mc();ot.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ot.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pc(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lc(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+$e.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}ot.log=console.debug||console.log||(()=>{});function hc(e){try{e?ot.storage.setItem("debug",e):ot.storage.removeItem("debug")}catch{}}function dc(){let e;try{e=ot.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function mc(){try{return localStorage}catch{}}$e.exports=Zr()(ot);var{formatters:Dc}=$e.exports;Dc.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Oo=P((Pp,Fo)=>{"use strict";Fo.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Po=P((kp,No)=>{"use strict";var gc=Dt("os"),_o=Dt("tty"),ut=Oo(),{env:V}=process,Bt;ut("no-color")||ut("no-colors")||ut("color=false")||ut("color=never")?Bt=0:(ut("color")||ut("colors")||ut("color=true")||ut("color=always"))&&(Bt=1);"FORCE_COLOR"in V&&(V.FORCE_COLOR==="true"?Bt=1:V.FORCE_COLOR==="false"?Bt=0:Bt=V.FORCE_COLOR.length===0?1:Math.min(parseInt(V.FORCE_COLOR,10),3));function Xr(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Wr(e,t){if(Bt===0)return 0;if(ut("color=16m")||ut("color=full")||ut("color=truecolor"))return 3;if(ut("color=256"))return 2;if(e&&!t&&Bt===void 0)return 0;let r=Bt||0;if(V.TERM==="dumb")return r;if(process.platform==="win32"){let n=gc.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in V)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in V)||V.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in V)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(V.TEAMCITY_VERSION)?1:0;if(V.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in V){let n=parseInt((V.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(V.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(V.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(V.TERM)||"COLORTERM"in V?1:r}function bc(e){let t=Wr(e,e&&e.isTTY);return Xr(t)}No.exports={supportsColor:bc,stdout:Xr(Wr(!0,_o.isatty(1))),stderr:Xr(Wr(!0,_o.isatty(2)))}});var $o=P((z,Ue)=>{var yc=Dt("tty"),Le=Dt("util");z.init=Sc;z.log=Cc;z.formatArgs=vc;z.save=xc;z.load=Tc;z.useColors=wc;z.destroy=Le.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");z.colors=[6,2,3,4,5,1];try{let e=Po();e&&(e.stderr||e).level>=2&&(z.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}z.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,c)=>c.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function wc(){return"colors"in z.inspectOpts?Boolean(z.inspectOpts.colors):yc.isatty(process.stderr.fd)}function vc(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),c=`  ${i};1m${t} \x1B[0m`;e[0]=c+e[0].split(`
`).join(`
`+c),e.push(i+"m+"+Ue.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Ec()+t+" "+e[0]}function Ec(){return z.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Cc(...e){return process.stderr.write(Le.format(...e)+`
`)}function xc(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Tc(){return process.env.DEBUG}function Sc(e){e.inspectOpts={};let t=Object.keys(z.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=z.inspectOpts[t[r]]}Ue.exports=Zr()(z);var{formatters:ko}=Ue.exports;ko.o=function(e){return this.inspectOpts.colors=this.useColors,Le.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};ko.O=function(e){return this.inspectOpts.colors=this.useColors,Le.inspect(e,this.inspectOpts)}});var Lo=P(($p,Yr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Yr.exports=Mo():Yr.exports=$o()});var je=P((Xp,jo)=>{jo.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}});var zo=P((Wp,Vo)=>{Vo.exports=function(t){if(t){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}});var Kr=P((Yp,qo)=>{var Ac=zo();qo.exports=e=>async t=>{t=Ac(t);let r=x=>{typeof x.return=="function"&&x.return()},n=null,i=null,c=x=>{n=x,i&&i(x),r(t)},p=null,D=!1,b=()=>{D=!0,p&&p()},C=null,f=!1,d=()=>{f=!0,C&&C()},g=null,v=()=>{g&&g()},m=()=>new Promise((x,A)=>{p=g=x,i=A,e.once("drain",v)}),S=()=>(r(t),new Promise((x,A)=>{if(D||f||n)return x();C=p=x,i=A})),I=()=>{e.removeListener("error",c),e.removeListener("close",b),e.removeListener("finish",d),e.removeListener("drain",v)};e.once("error",c),e.once("close",b),e.once("finish",d);try{for await(let x of t){if(!e.writable||e.destroyed||n)break;e.write(x)===!1&&await m()}}catch(x){n||e.destroy(),n=x}try{if(e.writable&&e.end(),await S(),n)throw n}finally{I()}}});var Qr=P((Jp,Go)=>{var Ic=Kr(),Bc=je();Go.exports=e=>({sink:Ic(e),source:Bc(e)})});var Zo=P((Kp,Ho)=>{var Rc=Qr();Ho.exports=e=>async function*(t){let r=Rc(e),n;if(r.sink(t).catch(i=>{n=i}),yield*r.source,n)throw n}});var Xo=P((Qp,Qt)=>{Qt.exports=je();Qt.exports.source=je();Qt.exports.sink=Kr();Qt.exports.transform=Zo();Qt.exports.duplex=Qr()});var en=P((qe,Jo)=>{(function(){var e,t=0xdeadbeefcafe,r=(t&16777215)==15715070;function n(o,s,u){o!=null&&(typeof o=="number"?this.fromNumber(o,s,u):s==null&&typeof o!="string"?this.fromString(o,256):this.fromString(o,s))}function i(){return new n(null)}function c(o,s,u,a,l,h){for(;--h>=0;){var y=s*this[o++]+u[a]+l;l=Math.floor(y/67108864),u[a++]=y&67108863}return l}function p(o,s,u,a,l,h){for(var y=s&32767,w=s>>15;--h>=0;){var B=this[o]&32767,j=this[o++]>>15,st=w*B+j*y;B=y*B+((st&32767)<<15)+u[a]+(l&1073741823),l=(B>>>30)+(st>>>15)+w*j+(l>>>30),u[a++]=B&1073741823}return l}function D(o,s,u,a,l,h){for(var y=s&16383,w=s>>14;--h>=0;){var B=this[o]&16383,j=this[o++]>>14,st=w*B+j*y;B=y*B+((st&16383)<<14)+u[a]+l,l=(B>>28)+(st>>14)+w*j,u[a++]=B&268435455}return l}var b=typeof navigator<"u";b&&r&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=p,e=30):b&&r&&navigator.appName!="Netscape"?(n.prototype.am=c,e=26):(n.prototype.am=D,e=28),n.prototype.DB=e,n.prototype.DM=(1<<e)-1,n.prototype.DV=1<<e;var C=52;n.prototype.FV=Math.pow(2,C),n.prototype.F1=C-e,n.prototype.F2=2*e-C;var f="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,g,v;for(g="0".charCodeAt(0),v=0;v<=9;++v)d[g++]=v;for(g="a".charCodeAt(0),v=10;v<36;++v)d[g++]=v;for(g="A".charCodeAt(0),v=10;v<36;++v)d[g++]=v;function m(o){return f.charAt(o)}function S(o,s){var u=d[o.charCodeAt(s)];return u??-1}function I(o){for(var s=this.t-1;s>=0;--s)o[s]=this[s];o.t=this.t,o.s=this.s}function x(o){this.t=1,this.s=o<0?-1:0,o>0?this[0]=o:o<-1?this[0]=o+this.DV:this.t=0}function A(o){var s=i();return s.fromInt(o),s}function _(o,s){var u;if(s==16)u=4;else if(s==8)u=3;else if(s==256)u=8;else if(s==2)u=1;else if(s==32)u=5;else if(s==4)u=2;else{this.fromRadix(o,s);return}this.t=0,this.s=0;for(var a=o.length,l=!1,h=0;--a>=0;){var y=u==8?o[a]&255:S(o,a);if(y<0){o.charAt(a)=="-"&&(l=!0);continue}l=!1,h==0?this[this.t++]=y:h+u>this.DB?(this[this.t-1]|=(y&(1<<this.DB-h)-1)<<h,this[this.t++]=y>>this.DB-h):this[this.t-1]|=y<<h,h+=u,h>=this.DB&&(h-=this.DB)}u==8&&(o[0]&128)!=0&&(this.s=-1,h>0&&(this[this.t-1]|=(1<<this.DB-h)-1<<h)),this.clamp(),l&&n.ZERO.subTo(this,this)}function L(){for(var o=this.s&this.DM;this.t>0&&this[this.t-1]==o;)--this.t}function tt(o){if(this.s<0)return"-"+this.negate().toString(o);var s;if(o==16)s=4;else if(o==8)s=3;else if(o==2)s=1;else if(o==32)s=5;else if(o==4)s=2;else return this.toRadix(o);var u=(1<<s)-1,a,l=!1,h="",y=this.t,w=this.DB-y*this.DB%s;if(y-- >0)for(w<this.DB&&(a=this[y]>>w)>0&&(l=!0,h=m(a));y>=0;)w<s?(a=(this[y]&(1<<w)-1)<<s-w,a|=this[--y]>>(w+=this.DB-s)):(a=this[y]>>(w-=s)&u,w<=0&&(w+=this.DB,--y)),a>0&&(l=!0),l&&(h+=m(a));return l?h:"0"}function K(){var o=i();return n.ZERO.subTo(this,o),o}function W(){return this.s<0?this.negate():this}function Q(o){var s=this.s-o.s;if(s!=0)return s;var u=this.t;if(s=u-o.t,s!=0)return this.s<0?-s:s;for(;--u>=0;)if((s=this[u]-o[u])!=0)return s;return 0}function at(o){var s=1,u;return(u=o>>>16)!=0&&(o=u,s+=16),(u=o>>8)!=0&&(o=u,s+=8),(u=o>>4)!=0&&(o=u,s+=4),(u=o>>2)!=0&&(o=u,s+=2),(u=o>>1)!=0&&(o=u,s+=1),s}function ms(){return this.t<=0?0:this.DB*(this.t-1)+at(this[this.t-1]^this.s&this.DM)}function Ds(o,s){var u;for(u=this.t-1;u>=0;--u)s[u+o]=this[u];for(u=o-1;u>=0;--u)s[u]=0;s.t=this.t+o,s.s=this.s}function gs(o,s){for(var u=o;u<this.t;++u)s[u-o]=this[u];s.t=Math.max(this.t-o,0),s.s=this.s}function bs(o,s){var u=o%this.DB,a=this.DB-u,l=(1<<a)-1,h=Math.floor(o/this.DB),y=this.s<<u&this.DM,w;for(w=this.t-1;w>=0;--w)s[w+h+1]=this[w]>>a|y,y=(this[w]&l)<<u;for(w=h-1;w>=0;--w)s[w]=0;s[h]=y,s.t=this.t+h+1,s.s=this.s,s.clamp()}function ys(o,s){s.s=this.s;var u=Math.floor(o/this.DB);if(u>=this.t){s.t=0;return}var a=o%this.DB,l=this.DB-a,h=(1<<a)-1;s[0]=this[u]>>a;for(var y=u+1;y<this.t;++y)s[y-u-1]|=(this[y]&h)<<l,s[y-u]=this[y]>>a;a>0&&(s[this.t-u-1]|=(this.s&h)<<l),s.t=this.t-u,s.clamp()}function ws(o,s){for(var u=0,a=0,l=Math.min(o.t,this.t);u<l;)a+=this[u]-o[u],s[u++]=a&this.DM,a>>=this.DB;if(o.t<this.t){for(a-=o.s;u<this.t;)a+=this[u],s[u++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;u<o.t;)a-=o[u],s[u++]=a&this.DM,a>>=this.DB;a-=o.s}s.s=a<0?-1:0,a<-1?s[u++]=this.DV+a:a>0&&(s[u++]=a),s.t=u,s.clamp()}function vs(o,s){var u=this.abs(),a=o.abs(),l=u.t;for(s.t=l+a.t;--l>=0;)s[l]=0;for(l=0;l<a.t;++l)s[l+u.t]=u.am(0,a[l],s,l,0,u.t);s.s=0,s.clamp(),this.s!=o.s&&n.ZERO.subTo(s,s)}function Es(o){for(var s=this.abs(),u=o.t=2*s.t;--u>=0;)o[u]=0;for(u=0;u<s.t-1;++u){var a=s.am(u,s[u],o,2*u,0,1);(o[u+s.t]+=s.am(u+1,2*s[u],o,2*u+1,a,s.t-u-1))>=s.DV&&(o[u+s.t]-=s.DV,o[u+s.t+1]=1)}o.t>0&&(o[o.t-1]+=s.am(u,s[u],o,2*u,0,1)),o.s=0,o.clamp()}function Cs(o,s,u){var a=o.abs();if(!(a.t<=0)){var l=this.abs();if(l.t<a.t){s?.fromInt(0),u!=null&&this.copyTo(u);return}u==null&&(u=i());var h=i(),y=this.s,w=o.s,B=this.DB-at(a[a.t-1]);B>0?(a.lShiftTo(B,h),l.lShiftTo(B,u)):(a.copyTo(h),l.copyTo(u));var j=h.t,st=h[j-1];if(st!=0){var rt=st*(1<<this.F1)+(j>1?h[j-2]>>this.F2:0),yt=this.FV/rt,we=(1<<this.F1)/rt,ft=1<<this.F2,pt=u.t,ve=pt-j,Tt=s??i();for(h.dlShiftTo(ve,Tt),u.compareTo(Tt)>=0&&(u[u.t++]=1,u.subTo(Tt,u)),n.ONE.dlShiftTo(j,Tt),Tt.subTo(h,h);h.t<j;)h[h.t++]=0;for(;--ve>=0;){var or=u[--pt]==st?this.DM:Math.floor(u[pt]*yt+(u[pt-1]+ft)*we);if((u[pt]+=h.am(0,or,u,ve,0,j))<or)for(h.dlShiftTo(ve,Tt),u.subTo(Tt,u);u[pt]<--or;)u.subTo(Tt,u)}s!=null&&(u.drShiftTo(j,s),y!=w&&n.ZERO.subTo(s,s)),u.t=j,u.clamp(),B>0&&u.rShiftTo(B,u),y<0&&n.ZERO.subTo(u,u)}}}function xs(o){var s=i();return this.abs().divRemTo(o,null,s),this.s<0&&s.compareTo(n.ZERO)>0&&o.subTo(s,s),s}function Ft(o){this.m=o}function Ts(o){return o.s<0||o.compareTo(this.m)>=0?o.mod(this.m):o}function Ss(o){return o}function As(o){o.divRemTo(this.m,null,o)}function Is(o,s,u){o.multiplyTo(s,u),this.reduce(u)}function Bs(o,s){o.squareTo(s),this.reduce(s)}Ft.prototype.convert=Ts,Ft.prototype.revert=Ss,Ft.prototype.reduce=As,Ft.prototype.mulTo=Is,Ft.prototype.sqrTo=Bs;function Rs(){if(this.t<1)return 0;var o=this[0];if((o&1)==0)return 0;var s=o&3;return s=s*(2-(o&15)*s)&15,s=s*(2-(o&255)*s)&255,s=s*(2-((o&65535)*s&65535))&65535,s=s*(2-o*s%this.DV)%this.DV,s>0?this.DV-s:-s}function Ot(o){this.m=o,this.mp=o.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<o.DB-15)-1,this.mt2=2*o.t}function Ms(o){var s=i();return o.abs().dlShiftTo(this.m.t,s),s.divRemTo(this.m,null,s),o.s<0&&s.compareTo(n.ZERO)>0&&this.m.subTo(s,s),s}function Fs(o){var s=i();return o.copyTo(s),this.reduce(s),s}function Os(o){for(;o.t<=this.mt2;)o[o.t++]=0;for(var s=0;s<this.m.t;++s){var u=o[s]&32767,a=u*this.mpl+((u*this.mph+(o[s]>>15)*this.mpl&this.um)<<15)&o.DM;for(u=s+this.m.t,o[u]+=this.m.am(0,a,o,s,0,this.m.t);o[u]>=o.DV;)o[u]-=o.DV,o[++u]++}o.clamp(),o.drShiftTo(this.m.t,o),o.compareTo(this.m)>=0&&o.subTo(this.m,o)}function _s(o,s){o.squareTo(s),this.reduce(s)}function Ns(o,s,u){o.multiplyTo(s,u),this.reduce(u)}Ot.prototype.convert=Ms,Ot.prototype.revert=Fs,Ot.prototype.reduce=Os,Ot.prototype.mulTo=Ns,Ot.prototype.sqrTo=_s;function Ps(){return(this.t>0?this[0]&1:this.s)==0}function ks(o,s){if(o>4294967295||o<1)return n.ONE;var u=i(),a=i(),l=s.convert(this),h=at(o)-1;for(l.copyTo(u);--h>=0;)if(s.sqrTo(u,a),(o&1<<h)>0)s.mulTo(a,l,u);else{var y=u;u=a,a=y}return s.revert(u)}function $s(o,s){var u;return o<256||s.isEven()?u=new Ft(s):u=new Ot(s),this.exp(o,u)}n.prototype.copyTo=I,n.prototype.fromInt=x,n.prototype.fromString=_,n.prototype.clamp=L,n.prototype.dlShiftTo=Ds,n.prototype.drShiftTo=gs,n.prototype.lShiftTo=bs,n.prototype.rShiftTo=ys,n.prototype.subTo=ws,n.prototype.multiplyTo=vs,n.prototype.squareTo=Es,n.prototype.divRemTo=Cs,n.prototype.invDigit=Rs,n.prototype.isEven=Ps,n.prototype.exp=ks,n.prototype.toString=tt,n.prototype.negate=K,n.prototype.abs=W,n.prototype.compareTo=Q,n.prototype.bitLength=ms,n.prototype.mod=xs,n.prototype.modPowInt=$s,n.ZERO=A(0),n.ONE=A(1);function Ls(){var o=i();return this.copyTo(o),o}function Us(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function js(){return this.t==0?this.s:this[0]<<24>>24}function Vs(){return this.t==0?this.s:this[0]<<16>>16}function zs(o){return Math.floor(Math.LN2*this.DB/Math.log(o))}function qs(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Gs(o){if(o==null&&(o=10),this.signum()==0||o<2||o>36)return"0";var s=this.chunkSize(o),u=Math.pow(o,s),a=A(u),l=i(),h=i(),y="";for(this.divRemTo(a,l,h);l.signum()>0;)y=(u+h.intValue()).toString(o).substr(1)+y,l.divRemTo(a,l,h);return h.intValue().toString(o)+y}function Hs(o,s){this.fromInt(0),s==null&&(s=10);for(var u=this.chunkSize(s),a=Math.pow(s,u),l=!1,h=0,y=0,w=0;w<o.length;++w){var B=S(o,w);if(B<0){o.charAt(w)=="-"&&this.signum()==0&&(l=!0);continue}y=s*y+B,++h>=u&&(this.dMultiply(a),this.dAddOffset(y,0),h=0,y=0)}h>0&&(this.dMultiply(Math.pow(s,h)),this.dAddOffset(y,0)),l&&n.ZERO.subTo(this,this)}function Zs(o,s,u){if(typeof s=="number")if(o<2)this.fromInt(1);else for(this.fromNumber(o,u),this.testBit(o-1)||this.bitwiseTo(n.ONE.shiftLeft(o-1),tr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(s);)this.dAddOffset(2,0),this.bitLength()>o&&this.subTo(n.ONE.shiftLeft(o-1),this);else{var a=new Array,l=o&7;a.length=(o>>3)+1,s.nextBytes(a),l>0?a[0]&=(1<<l)-1:a[0]=0,this.fromString(a,256)}}function Xs(){var o=this.t,s=new Array;s[0]=this.s;var u=this.DB-o*this.DB%8,a,l=0;if(o-- >0)for(u<this.DB&&(a=this[o]>>u)!=(this.s&this.DM)>>u&&(s[l++]=a|this.s<<this.DB-u);o>=0;)u<8?(a=(this[o]&(1<<u)-1)<<8-u,a|=this[--o]>>(u+=this.DB-8)):(a=this[o]>>(u-=8)&255,u<=0&&(u+=this.DB,--o)),(a&128)!=0&&(a|=-256),l==0&&(this.s&128)!=(a&128)&&++l,(l>0||a!=this.s)&&(s[l++]=a);return s}function Ws(o){return this.compareTo(o)==0}function Ys(o){return this.compareTo(o)<0?this:o}function Js(o){return this.compareTo(o)>0?this:o}function Ks(o,s,u){var a,l,h=Math.min(o.t,this.t);for(a=0;a<h;++a)u[a]=s(this[a],o[a]);if(o.t<this.t){for(l=o.s&this.DM,a=h;a<this.t;++a)u[a]=s(this[a],l);u.t=this.t}else{for(l=this.s&this.DM,a=h;a<o.t;++a)u[a]=s(l,o[a]);u.t=o.t}u.s=s(this.s,o.s),u.clamp()}function Qs(o,s){return o&s}function ti(o){var s=i();return this.bitwiseTo(o,Qs,s),s}function tr(o,s){return o|s}function ei(o){var s=i();return this.bitwiseTo(o,tr,s),s}function bn(o,s){return o^s}function ri(o){var s=i();return this.bitwiseTo(o,bn,s),s}function yn(o,s){return o&~s}function ni(o){var s=i();return this.bitwiseTo(o,yn,s),s}function oi(){for(var o=i(),s=0;s<this.t;++s)o[s]=this.DM&~this[s];return o.t=this.t,o.s=~this.s,o}function si(o){var s=i();return o<0?this.rShiftTo(-o,s):this.lShiftTo(o,s),s}function ii(o){var s=i();return o<0?this.lShiftTo(-o,s):this.rShiftTo(o,s),s}function ui(o){if(o==0)return-1;var s=0;return(o&65535)==0&&(o>>=16,s+=16),(o&255)==0&&(o>>=8,s+=8),(o&15)==0&&(o>>=4,s+=4),(o&3)==0&&(o>>=2,s+=2),(o&1)==0&&++s,s}function ai(){for(var o=0;o<this.t;++o)if(this[o]!=0)return o*this.DB+ui(this[o]);return this.s<0?this.t*this.DB:-1}function ci(o){for(var s=0;o!=0;)o&=o-1,++s;return s}function fi(){for(var o=0,s=this.s&this.DM,u=0;u<this.t;++u)o+=ci(this[u]^s);return o}function pi(o){var s=Math.floor(o/this.DB);return s>=this.t?this.s!=0:(this[s]&1<<o%this.DB)!=0}function li(o,s){var u=n.ONE.shiftLeft(o);return this.bitwiseTo(u,s,u),u}function hi(o){return this.changeBit(o,tr)}function di(o){return this.changeBit(o,yn)}function mi(o){return this.changeBit(o,bn)}function Di(o,s){for(var u=0,a=0,l=Math.min(o.t,this.t);u<l;)a+=this[u]+o[u],s[u++]=a&this.DM,a>>=this.DB;if(o.t<this.t){for(a+=o.s;u<this.t;)a+=this[u],s[u++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;u<o.t;)a+=o[u],s[u++]=a&this.DM,a>>=this.DB;a+=o.s}s.s=a<0?-1:0,a>0?s[u++]=a:a<-1&&(s[u++]=this.DV+a),s.t=u,s.clamp()}function gi(o){var s=i();return this.addTo(o,s),s}function bi(o){var s=i();return this.subTo(o,s),s}function yi(o){var s=i();return this.multiplyTo(o,s),s}function wi(){var o=i();return this.squareTo(o),o}function vi(o){var s=i();return this.divRemTo(o,s,null),s}function Ei(o){var s=i();return this.divRemTo(o,null,s),s}function Ci(o){var s=i(),u=i();return this.divRemTo(o,s,u),new Array(s,u)}function xi(o){this[this.t]=this.am(0,o-1,this,0,0,this.t),++this.t,this.clamp()}function Ti(o,s){if(o!=0){for(;this.t<=s;)this[this.t++]=0;for(this[s]+=o;this[s]>=this.DV;)this[s]-=this.DV,++s>=this.t&&(this[this.t++]=0),++this[s]}}function oe(){}function wn(o){return o}function Si(o,s,u){o.multiplyTo(s,u)}function Ai(o,s){o.squareTo(s)}oe.prototype.convert=wn,oe.prototype.revert=wn,oe.prototype.mulTo=Si,oe.prototype.sqrTo=Ai;function Ii(o){return this.exp(o,new oe)}function Bi(o,s,u){var a=Math.min(this.t+o.t,s);for(u.s=0,u.t=a;a>0;)u[--a]=0;var l;for(l=u.t-this.t;a<l;++a)u[a+this.t]=this.am(0,o[a],u,a,0,this.t);for(l=Math.min(o.t,s);a<l;++a)this.am(0,o[a],u,a,0,s-a);u.clamp()}function Ri(o,s,u){--s;var a=u.t=this.t+o.t-s;for(u.s=0;--a>=0;)u[a]=0;for(a=Math.max(s-this.t,0);a<o.t;++a)u[this.t+a-s]=this.am(s-a,o[a],u,0,0,this.t+a-s);u.clamp(),u.drShiftTo(1,u)}function _t(o){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*o.t,this.r2),this.mu=this.r2.divide(o),this.m=o}function Mi(o){if(o.s<0||o.t>2*this.m.t)return o.mod(this.m);if(o.compareTo(this.m)<0)return o;var s=i();return o.copyTo(s),this.reduce(s),s}function Fi(o){return o}function Oi(o){for(o.drShiftTo(this.m.t-1,this.r2),o.t>this.m.t+1&&(o.t=this.m.t+1,o.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);o.compareTo(this.r2)<0;)o.dAddOffset(1,this.m.t+1);for(o.subTo(this.r2,o);o.compareTo(this.m)>=0;)o.subTo(this.m,o)}function _i(o,s){o.squareTo(s),this.reduce(s)}function Ni(o,s,u){o.multiplyTo(s,u),this.reduce(u)}_t.prototype.convert=Mi,_t.prototype.revert=Fi,_t.prototype.reduce=Oi,_t.prototype.mulTo=Ni,_t.prototype.sqrTo=_i;function Pi(o,s){var u=o.bitLength(),a,l=A(1),h;if(u<=0)return l;u<18?a=1:u<48?a=3:u<144?a=4:u<768?a=5:a=6,u<8?h=new Ft(s):s.isEven()?h=new _t(s):h=new Ot(s);var y=new Array,w=3,B=a-1,j=(1<<a)-1;if(y[1]=h.convert(this),a>1){var st=i();for(h.sqrTo(y[1],st);w<=j;)y[w]=i(),h.mulTo(st,y[w-2],y[w]),w+=2}var rt=o.t-1,yt,we=!0,ft=i(),pt;for(u=at(o[rt])-1;rt>=0;){for(u>=B?yt=o[rt]>>u-B&j:(yt=(o[rt]&(1<<u+1)-1)<<B-u,rt>0&&(yt|=o[rt-1]>>this.DB+u-B)),w=a;(yt&1)==0;)yt>>=1,--w;if((u-=w)<0&&(u+=this.DB,--rt),we)y[yt].copyTo(l),we=!1;else{for(;w>1;)h.sqrTo(l,ft),h.sqrTo(ft,l),w-=2;w>0?h.sqrTo(l,ft):(pt=l,l=ft,ft=pt),h.mulTo(ft,y[yt],l)}for(;rt>=0&&(o[rt]&1<<u)==0;)h.sqrTo(l,ft),pt=l,l=ft,ft=pt,--u<0&&(u=this.DB-1,--rt)}return h.revert(l)}function ki(o){var s=this.s<0?this.negate():this.clone(),u=o.s<0?o.negate():o.clone();if(s.compareTo(u)<0){var a=s;s=u,u=a}var l=s.getLowestSetBit(),h=u.getLowestSetBit();if(h<0)return s;for(l<h&&(h=l),h>0&&(s.rShiftTo(h,s),u.rShiftTo(h,u));s.signum()>0;)(l=s.getLowestSetBit())>0&&s.rShiftTo(l,s),(l=u.getLowestSetBit())>0&&u.rShiftTo(l,u),s.compareTo(u)>=0?(s.subTo(u,s),s.rShiftTo(1,s)):(u.subTo(s,u),u.rShiftTo(1,u));return h>0&&u.lShiftTo(h,u),u}function $i(o){if(o<=0)return 0;var s=this.DV%o,u=this.s<0?o-1:0;if(this.t>0)if(s==0)u=this[0]%o;else for(var a=this.t-1;a>=0;--a)u=(s*u+this[a])%o;return u}function Li(o){var s=o.isEven();if(this.isEven()&&s||o.signum()==0)return n.ZERO;for(var u=o.clone(),a=this.clone(),l=A(1),h=A(0),y=A(0),w=A(1);u.signum()!=0;){for(;u.isEven();)u.rShiftTo(1,u),s?((!l.isEven()||!h.isEven())&&(l.addTo(this,l),h.subTo(o,h)),l.rShiftTo(1,l)):h.isEven()||h.subTo(o,h),h.rShiftTo(1,h);for(;a.isEven();)a.rShiftTo(1,a),s?((!y.isEven()||!w.isEven())&&(y.addTo(this,y),w.subTo(o,w)),y.rShiftTo(1,y)):w.isEven()||w.subTo(o,w),w.rShiftTo(1,w);u.compareTo(a)>=0?(u.subTo(a,u),s&&l.subTo(y,l),h.subTo(w,h)):(a.subTo(u,a),s&&y.subTo(l,y),w.subTo(h,w))}if(a.compareTo(n.ONE)!=0)return n.ZERO;if(w.compareTo(o)>=0)return w.subtract(o);if(w.signum()<0)w.addTo(o,w);else return w;return w.signum()<0?w.add(o):w}var Y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ui=(1<<26)/Y[Y.length-1];function ji(o){var s,u=this.abs();if(u.t==1&&u[0]<=Y[Y.length-1]){for(s=0;s<Y.length;++s)if(u[0]==Y[s])return!0;return!1}if(u.isEven())return!1;for(s=1;s<Y.length;){for(var a=Y[s],l=s+1;l<Y.length&&a<Ui;)a*=Y[l++];for(a=u.modInt(a);s<l;)if(a%Y[s++]==0)return!1}return u.millerRabin(o)}function Vi(o){var s=this.subtract(n.ONE),u=s.getLowestSetBit();if(u<=0)return!1;var a=s.shiftRight(u);o=o+1>>1,o>Y.length&&(o=Y.length);for(var l=i(),h=0;h<o;++h){l.fromInt(Y[Math.floor(Math.random()*Y.length)]);var y=l.modPow(a,this);if(y.compareTo(n.ONE)!=0&&y.compareTo(s)!=0){for(var w=1;w++<u&&y.compareTo(s)!=0;)if(y=y.modPowInt(2,this),y.compareTo(n.ONE)==0)return!1;if(y.compareTo(s)!=0)return!1}}return!0}n.prototype.chunkSize=zs,n.prototype.toRadix=Gs,n.prototype.fromRadix=Hs,n.prototype.fromNumber=Zs,n.prototype.bitwiseTo=Ks,n.prototype.changeBit=li,n.prototype.addTo=Di,n.prototype.dMultiply=xi,n.prototype.dAddOffset=Ti,n.prototype.multiplyLowerTo=Bi,n.prototype.multiplyUpperTo=Ri,n.prototype.modInt=$i,n.prototype.millerRabin=Vi,n.prototype.clone=Ls,n.prototype.intValue=Us,n.prototype.byteValue=js,n.prototype.shortValue=Vs,n.prototype.signum=qs,n.prototype.toByteArray=Xs,n.prototype.equals=Ws,n.prototype.min=Ys,n.prototype.max=Js,n.prototype.and=ti,n.prototype.or=ei,n.prototype.xor=ri,n.prototype.andNot=ni,n.prototype.not=oi,n.prototype.shiftLeft=si,n.prototype.shiftRight=ii,n.prototype.getLowestSetBit=ai,n.prototype.bitCount=fi,n.prototype.testBit=pi,n.prototype.setBit=hi,n.prototype.clearBit=di,n.prototype.flipBit=mi,n.prototype.add=gi,n.prototype.subtract=bi,n.prototype.multiply=yi,n.prototype.divide=vi,n.prototype.remainder=Ei,n.prototype.divideAndRemainder=Ci,n.prototype.modPow=Pi,n.prototype.modInverse=Li,n.prototype.pow=Ii,n.prototype.gcd=ki,n.prototype.isProbablePrime=ji,n.prototype.square=wi,n.prototype.Barrett=_t;var ye,et,U;function zi(o){et[U++]^=o&255,et[U++]^=o>>8&255,et[U++]^=o>>16&255,et[U++]^=o>>24&255,U>=nr&&(U-=nr)}function vn(){zi(new Date().getTime())}if(et==null){et=new Array,U=0;var ct;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var En=new Uint8Array(32);for(window.crypto.getRandomValues(En),ct=0;ct<32;++ct)et[U++]=En[ct]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Cn=window.crypto.random(32);for(ct=0;ct<Cn.length;++ct)et[U++]=Cn.charCodeAt(ct)&255}}for(;U<nr;)ct=Math.floor(65536*Math.random()),et[U++]=ct>>>8,et[U++]=ct&255;U=0,vn()}function qi(){if(ye==null){for(vn(),ye=Xi(),ye.init(et),U=0;U<et.length;++U)et[U]=0;U=0}return ye.next()}function Gi(o){var s;for(s=0;s<o.length;++s)o[s]=qi()}function er(){}er.prototype.nextBytes=Gi;function rr(){this.i=0,this.j=0,this.S=new Array}function Hi(o){var s,u,a;for(s=0;s<256;++s)this.S[s]=s;for(u=0,s=0;s<256;++s)u=u+this.S[s]+o[s%o.length]&255,a=this.S[s],this.S[s]=this.S[u],this.S[u]=a;this.i=0,this.j=0}function Zi(){var o;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,o=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=o,this.S[o+this.S[this.i]&255]}rr.prototype.init=Hi,rr.prototype.next=Zi;function Xi(){return new rr}var nr=256;typeof qe<"u"?qe=Jo.exports={default:n,BigInteger:n,SecureRandom:er}:this.jsbn={BigInteger:n,SecureRandom:er}}).call(qe)});var ge=P(Ge=>{(function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(p){return n(c(p),arguments)}function r(p,D){return t.apply(null,[p].concat(D||[]))}function n(p,D){var b=1,C=p.length,f,d="",g,v,m,S,I,x,A,_;for(g=0;g<C;g++)if(typeof p[g]=="string")d+=p[g];else if(typeof p[g]=="object"){if(m=p[g],m.keys)for(f=D[b],v=0;v<m.keys.length;v++){if(f==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[v],m.keys[v-1]));f=f[m.keys[v]]}else m.param_no?f=D[m.param_no]:f=D[b++];if(e.not_type.test(m.type)&&e.not_primitive.test(m.type)&&f instanceof Function&&(f=f()),e.numeric_arg.test(m.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(t("[sprintf] expecting number but found %T",f));switch(e.number.test(m.type)&&(A=f>=0),m.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,m.width?parseInt(m.width):0);break;case"e":f=m.precision?parseFloat(f).toExponential(m.precision):parseFloat(f).toExponential();break;case"f":f=m.precision?parseFloat(f).toFixed(m.precision):parseFloat(f);break;case"g":f=m.precision?String(Number(f.toPrecision(m.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=m.precision?f.substring(0,m.precision):f;break;case"t":f=String(!!f),f=m.precision?f.substring(0,m.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=m.precision?f.substring(0,m.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=m.precision?f.substring(0,m.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}e.json.test(m.type)?d+=f:(e.number.test(m.type)&&(!A||m.sign)?(_=A?"+":"-",f=f.toString().replace(e.sign,"")):_="",I=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",x=m.width-(_+f).length,S=m.width&&x>0?I.repeat(x):"",d+=m.align?_+f+S:I==="0"?_+S+f:S+_+f)}return d}var i=Object.create(null);function c(p){if(i[p])return i[p];for(var D=p,b,C=[],f=0;D;){if((b=e.text.exec(D))!==null)C.push(b[0]);else if((b=e.modulo.exec(D))!==null)C.push("%");else if((b=e.placeholder.exec(D))!==null){if(b[2]){f|=1;var d=[],g=b[2],v=[];if((v=e.key.exec(g))!==null)for(d.push(v[1]);(g=g.substring(v[0].length))!=="";)if((v=e.key_access.exec(g))!==null)d.push(v[1]);else if((v=e.index_access.exec(g))!==null)d.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=d}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");C.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");D=D.substring(b[0].length)}return i[p]=C}typeof Ge<"u"&&(Ge.sprintf=t,Ge.vsprintf=r),typeof window<"u"&&(window.sprintf=t,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:t,vsprintf:r}}))})()});var Gc={};nt(Gc,{TCP:()=>gn});var hs=N(Dt("net"),1);var Tn="[a-fA-F\\d:]",St=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Tn})|(?<=${Tn})(?=\\s|$))`:"",lt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",k="[a-fA-F\\d]{1,4}",Ce=`
(?:
(?:${k}:){7}(?:${k}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${k}:){6}(?:${lt}|:${k}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${k}:){5}(?::${lt}|(?::${k}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${k}:){4}(?:(?::${k}){0,1}:${lt}|(?::${k}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${k}:){3}(?:(?::${k}){0,2}:${lt}|(?::${k}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${k}:){2}(?:(?::${k}){0,3}:${lt}|(?::${k}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${k}:){1}(?:(?::${k}){0,4}:${lt}|(?::${k}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${k}){0,5}:${lt}|(?::${k}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),eu=new RegExp(`(?:^${lt}$)|(?:^${Ce}$)`),ru=new RegExp(`^${lt}$`),nu=new RegExp(`^${Ce}$`),sr=e=>e&&e.exact?eu:new RegExp(`(?:${St(e)}${lt}${St(e)})|(?:${St(e)}${Ce}${St(e)})`,"g");sr.v4=e=>e&&e.exact?ru:new RegExp(`${St(e)}${lt}${St(e)}`,"g");sr.v6=e=>e&&e.exact?nu:new RegExp(`${St(e)}${Ce}${St(e)}`,"g");var xe=sr;var Sn=N(Dt("node:vm"),1);function ir(e,{timeout:t}={}){let r=new Sn.default.Script("returnValue = function_()"),n=(...i)=>{let c={function_:()=>e(...i)};return r.runInNewContext(c,{timeout:t}),c.returnValue};return Object.defineProperty(n,"name",{value:`functionTimeout(${e.name||"<anonymous>"})`,configurable:!0}),n}function An(e){return e?.code==="ERR_SCRIPT_EXECUTION_TIMEOUT"}var{toString:ou}=Object.prototype;function ur(e){return ou.call(e)==="[object RegExp]"}var In={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function ar(e,t={}){if(!ur(e))throw new TypeError("Expected a RegExp instance");let r=Object.keys(In).map(i=>(typeof t[i]=="boolean"?t[i]:e[i])?In[i]:"").join(""),n=new RegExp(t.source||e.source,r);return n.lastIndex=typeof t.lastIndex=="number"?t.lastIndex:e.lastIndex,n}function Te(e,t,{timeout:r}={}){try{return ir(()=>ar(e).test(t),{timeout:r})()}catch(n){if(An(n))return!1;throw n}}var su=15,Bn=45,cr={timeout:400};function Se(e){return Te(xe({exact:!0}),e.slice(0,Bn),cr)}function Rn(e){return Te(xe.v6({exact:!0}),e.slice(0,Bn),cr)}function Mn(e){return Te(xe.v4({exact:!0}),e.slice(0,su),cr)}var dr={};nt(dr,{identity:()=>pu});function iu(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var c=e.charAt(i),p=c.charCodeAt(0);if(r[p]!==255)throw new TypeError(c+" is ambiguous");r[p]=i}var D=e.length,b=e.charAt(0),C=Math.log(D)/Math.log(256),f=Math.log(256)/Math.log(D);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var S=0,I=0,x=0,A=m.length;x!==A&&m[x]===0;)x++,S++;for(var _=(A-x)*f+1>>>0,L=new Uint8Array(_);x!==A;){for(var tt=m[x],K=0,W=_-1;(tt!==0||K<I)&&W!==-1;W--,K++)tt+=256*L[W]>>>0,L[W]=tt%D>>>0,tt=tt/D>>>0;if(tt!==0)throw new Error("Non-zero carry");I=K,x++}for(var Q=_-I;Q!==_&&L[Q]===0;)Q++;for(var at=b.repeat(S);Q<_;++Q)at+=e.charAt(L[Q]);return at}function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var S=0;if(m[S]!==" "){for(var I=0,x=0;m[S]===b;)I++,S++;for(var A=(m.length-S)*C+1>>>0,_=new Uint8Array(A);m[S];){var L=r[m.charCodeAt(S)];if(L===255)return;for(var tt=0,K=A-1;(L!==0||tt<x)&&K!==-1;K--,tt++)L+=D*_[K]>>>0,_[K]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=tt,S++}if(m[S]!==" "){for(var W=A-x;W!==A&&_[W]===0;)W++;for(var Q=new Uint8Array(I+(A-W)),at=I;W!==A;)Q[at++]=_[W++];return Q}}}function v(m){var S=g(m);if(S)return S;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:g,decode:v}}var uu=iu,au=uu,Fn=au;var lf=new Uint8Array(0);var On=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},it=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var _n=e=>new TextEncoder().encode(e),Nn=e=>new TextDecoder().decode(e);var fr=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},pr=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return kn(this,t)}},lr=class{constructor(t){this.decoders=t}or(t){return kn(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},kn=(e,t)=>new lr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),hr=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new fr(t,r,n),this.decoder=new pr(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},zt=({name:e,prefix:t,encode:r,decode:n})=>new hr(e,t,r,n),At=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=Fn(r,t);return zt({prefix:e,name:t,encode:n,decode:c=>it(i(c))})},cu=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let c=e.length;for(;e[c-1]==="=";)--c;let p=new Uint8Array(c*r/8|0),D=0,b=0,C=0;for(let f=0;f<c;++f){let d=i[e[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);b=b<<r|d,D+=r,D>=8&&(D-=8,p[C++]=255&b>>D)}if(D>=r||255&b<<8-D)throw new SyntaxError("Unexpected end of data");return p},fu=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,c="",p=0,D=0;for(let b=0;b<e.length;++b)for(D=D<<8|e[b],p+=8;p>r;)p-=r,c+=t[i&D>>p];if(p&&(c+=t[i&D<<r-p]),n)for(;c.length*r&7;)c+="=";return c},F=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>zt({prefix:t,name:e,encode(i){return fu(i,n,r)},decode(i){return cu(i,n,r,e)}});var pu=zt({prefix:"\0",name:"identity",encode:e=>Nn(e),decode:e=>_n(e)});var mr={};nt(mr,{base2:()=>lu});var lu=F({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Dr={};nt(Dr,{base8:()=>hu});var hu=F({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gr={};nt(gr,{base10:()=>du});var du=At({prefix:"9",name:"base10",alphabet:"0123456789"});var br={};nt(br,{base16:()=>mu,base16upper:()=>Du});var mu=F({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Du=F({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yr={};nt(yr,{base32:()=>ht,base32hex:()=>wu,base32hexpad:()=>Eu,base32hexpadupper:()=>Cu,base32hexupper:()=>vu,base32pad:()=>bu,base32padupper:()=>yu,base32upper:()=>gu,base32z:()=>xu});var ht=F({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gu=F({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bu=F({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yu=F({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wu=F({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vu=F({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Eu=F({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cu=F({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xu=F({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var wr={};nt(wr,{base36:()=>Tu,base36upper:()=>Su});var Tu=At({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Su=At({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var vr={};nt(vr,{base58btc:()=>q,base58flickr:()=>Au});var q=At({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Au=At({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cr={};nt(Cr,{base64:()=>Er,base64pad:()=>Iu,base64url:()=>Bu,base64urlpad:()=>Ru});var Er=F({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Iu=F({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Bu=F({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ru=F({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xr={};nt(xr,{base256emoji:()=>Nu});var $n=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Mu=$n.reduce((e,t,r)=>(e[r]=t,e),[]),Fu=$n.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Ou(e){return e.reduce((t,r)=>(t+=Mu[r],t),"")}function _u(e){let t=[];for(let r of e){let n=Fu[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Nu=zt({prefix:"\u{1F680}",name:"base256emoji",encode:Ou,decode:_u});var Br={};nt(Br,{sha256:()=>ta,sha512:()=>ea});var Ir=N(Dt("crypto"),1);var Pu=jn,Ln=128,ku=127,$u=~ku,Lu=Math.pow(2,31);function jn(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Lu;)t[r++]=e&255|Ln,e/=128;for(;e&$u;)t[r++]=e&255|Ln,e>>>=7;return t[r]=e|0,jn.bytes=r-n+1,t}var Uu=Tr,ju=128,Un=127;function Tr(e,n){var r=0,n=n||0,i=0,c=n,p,D=e.length;do{if(c>=D)throw Tr.bytes=0,new RangeError("Could not decode varint");p=e[c++],r+=i<28?(p&Un)<<i:(p&Un)*Math.pow(2,i),i+=7}while(p>=ju);return Tr.bytes=c-n,r}var Vu=Math.pow(2,7),zu=Math.pow(2,14),qu=Math.pow(2,21),Gu=Math.pow(2,28),Hu=Math.pow(2,35),Zu=Math.pow(2,42),Xu=Math.pow(2,49),Wu=Math.pow(2,56),Yu=Math.pow(2,63),Ju=function(e){return e<Vu?1:e<zu?2:e<qu?3:e<Gu?4:e<Hu?5:e<Zu?6:e<Xu?7:e<Wu?8:e<Yu?9:10},Ku={encode:Pu,decode:Uu,encodingLength:Ju},Qu=Ku,se=Qu;var ie=(e,t=0)=>[se.decode(e,t),se.decode.bytes],qt=(e,t,r=0)=>(se.encode(e,t,r),t),Gt=e=>se.encodingLength(e);var Nt=(e,t)=>{let r=t.byteLength,n=Gt(e),i=n+Gt(r),c=new Uint8Array(i+r);return qt(e,c,0),qt(r,c,n),c.set(t,i),new Ht(e,r,t,c)},Ie=e=>{let t=it(e),[r,n]=ie(t),[i,c]=ie(t.subarray(n)),p=t.subarray(n+c);if(p.byteLength!==i)throw new Error("Incorrect length");return new Ht(r,i,p,t)},Vn=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&On(e.bytes,t.bytes),Ht=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var Ar=({name:e,code:t,encode:r})=>new Sr(e,t,r),Sr=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Nt(this.code,r):r.then(n=>Nt(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ta=Ar({name:"sha2-256",code:18,encode:e=>it(Ir.default.createHash("sha256").update(e).digest())}),ea=Ar({name:"sha2-512",code:19,encode:e=>it(Ir.default.createHash("sha512").update(e).digest())});var Rr={};nt(Rr,{identity:()=>oa});var qn=0,ra="identity",Gn=it,na=e=>Nt(qn,Gn(e)),oa={code:qn,name:ra,encode:Gn,digest:na};var _f=new TextEncoder,Nf=new TextDecoder;var M=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Re,byteLength:Re,code:Be,version:Be,multihash:Be,bytes:Be,_baseCache:Re,asCID:Re})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==ue)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==fa)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return M.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Nt(t,r);return M.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Vn(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return aa(r,i,t||q.encoder);default:return ca(r,i,t||ht.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return la(/^0\.0/,ha),!!(t&&(t[Zn]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof M)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:i,bytes:c}=t;return new M(r,n,i,c||Hn(r,n,i.bytes))}else if(t!=null&&t[Zn]===!0){let{version:r,multihash:n,code:i}=t,c=Ie(n);return M.create(r,i,c)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==ue)throw new Error(`Version 0 CID must use dag-pb (code: ${ue}) block encoding`);return new M(t,r,n,n.bytes)}case 1:{let i=Hn(t,r,n.bytes);return new M(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return M.create(0,ue,t)}static createV1(t,r){return M.create(1,t,r)}static decode(t){let[r,n]=M.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=M.inspectBytes(t),n=r.size-r.multihashSize,i=it(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let c=i.subarray(r.multihashSize-r.digestSize),p=new Ht(r.multihashCode,r.digestSize,c,i);return[r.version===0?M.createV0(p):M.createV1(r.codec,p),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[d,g]=ie(t.subarray(r));return r+=g,d},i=n(),c=ue;if(i===18?(i=0,r=0):i===1&&(c=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let p=r,D=n(),b=n(),C=r+b,f=C-p;return{version:i,codec:c,multihashCode:D,digestSize:b,multihashSize:f,size:C}}static parse(t,r){let[n,i]=ua(t,r),c=M.decode(i);return c._baseCache.set(n,t),c}},ua=(e,t)=>{switch(e[0]){case"Q":{let r=t||q;return[q.prefix,r.decode(`${q.prefix}${e}`)]}case q.prefix:{let r=t||q;return[q.prefix,r.decode(e)]}case ht.prefix:{let r=t||ht;return[ht.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},aa=(e,t,r)=>{let{prefix:n}=r;if(n!==q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let c=r.encode(e).slice(1);return t.set(n,c),c}else return i},ca=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let c=r.encode(e);return t.set(n,c),c}else return i},ue=112,fa=18,Hn=(e,t,r)=>{let n=Gt(e),i=n+Gt(t),c=new Uint8Array(i+r.byteLength);return qt(e,c,0),qt(t,c,n),c.set(r,i),c},Zn=Symbol.for("@ipld/js-cid/CID"),Be={writable:!1,configurable:!1,enumerable:!0},Re={writable:!1,enumerable:!1,configurable:!1},pa="0.0.0-dev",la=(e,t)=>{if(e.test(pa))console.warn(t);else throw new Error(t)},ha=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var ae={...dr,...mr,...Dr,...gr,...br,...yr,...wr,...vr,...Cr,...xr},zf={...Br,...Rr};function Me(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Wn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Xn=Wn("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),Mr=Wn("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Me(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),da={utf8:Xn,"utf-8":Xn,hex:ae.base16,latin1:Mr,ascii:Mr,binary:Mr,...ae},Fe=da;function J(e,t="utf8"){let r=Fe[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var Yn=Mn,ma=Rn,Fr=function(e){let t=0;if(e=e.toString().trim(),Yn(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(ma(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let c=Yn(r[n]),p;c&&(p=Fr(r[n]),r[n]=J(p.slice(0,2),"base16")),p!=null&&++n<8&&r.splice(n,0,J(p.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let c=[n,1];for(n=9-r.length;n>0;n--)c.push("0");r.splice.apply(r,c)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let c=parseInt(r[n],16);i[t++]=c>>8&255,i[t++]=c&255}return i}throw new Error("invalid ip address")},Jn=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let c=0;c<r;c++)i.push(e[t+c]);return i.join(".")}if(r===16){let i=[];for(let c=0;c<r;c+=2)i.push(n.getUint16(t+c).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var ce={},Or={},ga=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];ga.forEach(e=>{let t=ba(...e);Or[t.code]=t,ce[t.name]=t});function ba(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function $(e){if(typeof e=="number"){if(Or[e]!=null)return Or[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(ce[e]!=null)return ce[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var gt=N(Oe(),1);function Pr(e,t="utf8"){let r=Fe[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function wt(e,t){t||(t=e.reduce((i,c)=>i+c.length,0));let r=Me(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}function co(e,t){switch($(e).code){case 4:case 41:return Oa(t);case 6:case 273:case 33:case 132:return po(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Na(t);case 421:return La(t);case 444:return ao(t);case 445:return ao(t);case 466:return $a(t);default:return J(t,"base16")}}function fo(e,t){switch($(e).code){case 4:return uo(t);case 41:return uo(t);case 6:case 273:case 33:case 132:return $r(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return _a(t);case 421:return Pa(t);case 444:return Ua(t);case 445:return ja(t);case 466:return ka(t);default:return Pr(t,"base16")}}var kr=Object.values(ae).map(e=>e.decoder),Fa=function(){let e=kr[0].or(kr[1]);return kr.slice(2).forEach(t=>e=e.or(t)),e}();function uo(e){if(!Se(e))throw new Error("invalid ip address");return Fr(e)}function Oa(e){let t=Jn(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Se(t))throw new Error("invalid ip address");return t}function $r(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function po(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function _a(e){let t=Pr(e),r=Uint8Array.from(gt.default.encode(t.length));return wt([r,t],r.length+t.length)}function Na(e){let t=gt.default.decode(e);if(e=e.slice(gt.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return J(e)}function Pa(e){let t;e[0]==="Q"||e[0]==="1"?t=Ie(q.decode(`z${e}`)).bytes:t=M.parse(e).multihash.bytes;let r=Uint8Array.from(gt.default.encode(t.length));return wt([r,t],r.length+t.length)}function ka(e){let t=Fa.decode(e),r=Uint8Array.from(gt.default.encode(t.length));return wt([r,t],r.length+t.length)}function $a(e){let t=gt.default.decode(e),r=e.slice(gt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+J(r,"base64url")}function La(e){let t=gt.default.decode(e),r=e.slice(gt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return J(r,"base58btc")}function Ua(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=ht.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=$r(n);return wt([r,i],r.length+i.length)}function ja(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=ht.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=$r(n);return wt([r,i],r.length+i.length)}function ao(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=J(t,"base32"),i=po(r);return`${n}:${i}`}var Xt=N(Oe(),1);function Va(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],c=$(i);if(c.size===0){t.push([i]);continue}if(n++,n>=r.length)throw ho("invalid address: "+e);if(c.path===!0){t.push([i,zr(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function za(e){let t=[];return e.map(r=>{let n=Ne(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),zr(t.join("/"))}function qa(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Ne(t);return t.length>1?[r.code,fo(r.code,t[1])]:[r.code]})}function Lr(e){return e.map(t=>{let r=Ne(t);return t[1]!=null?[r.code,co(r.code,t[1])]:[r.code]})}function Ur(e){return _e(wt(e.map(t=>{let r=Ne(t),n=Uint8Array.from(Xt.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=wt([n,t[1]])),n})))}function jr(e,t){return e.size>0?e.size/8:e.size===0?0:Xt.default.decode(t)+Xt.default.decode.bytes}function fe(e){let t=[],r=0;for(;r<e.length;){let n=Xt.default.decode(e,r),i=Xt.default.decode.bytes,c=$(n),p=jr(c,e.slice(r+i));if(p===0){t.push([n]),r+=i;continue}let D=e.slice(r+i,r+i+p);if(r+=p+i,r>e.length)throw ho("Invalid address Uint8Array: "+J(e,"base16"));t.push([n,D])}return t}function Vr(e){let t=fe(e),r=Lr(t);return za(r)}function Ga(e){e=zr(e);let t=Va(e),r=qa(t);return Ur(r)}function lo(e){return Ga(e)}function _e(e){let t=Ha(e);if(t!=null)throw t;return Uint8Array.from(e)}function Ha(e){try{fe(e)}catch(t){return t}}function zr(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function ho(e){return new Error("Error parsing address: "+e)}function Ne(e){return $(e[0])}var qr=N(Oe(),1);var wo=N(pe(),1);function go(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var bo,Wa=Symbol.for("nodejs.util.inspect.custom"),yo=[$("dns").code,$("dns4").code,$("dns6").code,$("dnsaddr").code],Ya=[$("p2p").code,$("ipfs").code],Ja=new Map,vo=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Ka(e){return Boolean(e?.[vo])}var vt=class{constructor(t){if(this[bo]=!0,t==null&&(t=""),t instanceof Uint8Array)this.bytes=_e(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=lo(t)}else if(Ka(t))this.bytes=_e(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Vr(this.bytes)}toJSON(){return this.toString()}toOptions(){let t=this.protoCodes(),r=this.toString().split("/").slice(1),n,i;if(r.length>2)yo.includes(t[0])&&Ya.includes(t[1])?(n=$("tcp").name,i=443):(n=$(r[2]).name,i=parseInt(r[3]));else if(yo.includes(t[0]))n=$("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t[0]===41||t[0]===55?6:4,host:r[1],transport:n,port:i}}protos(){return this.protoCodes().map(t=>Object.assign({},$(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let i=qr.default.decode(r,n),c=qr.default.decode.bytes,p=$(i);n+=jr(p,r.slice(n+c))+c,t.push(i)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return fe(this.bytes)}stringTuples(){let t=fe(this.bytes);return Lr(t)}encapsulate(t){return t=new vt(t),new vt(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new vt(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new vt(Ur(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===ce.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?J(q.decode(`z${n}`),"base58btc"):J(M.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>$(r[0]).path===!0)[0][1],t==null&&(t=null)}catch{t=null}return t}equals(t){return go(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(c=>c.resolvable);if(r==null)return[this];let n=Ja.get(r.name);if(n==null)throw(0,wo.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(c=>new vt(c))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(bo=vo,Wa)](){return this.inspect()}inspect(){return"<Multiaddr "+J(this.bytes,"base16")+" - "+Vr(this.bytes)+">"}};function Et(e){return new vt(e)}var Qa=E("dns4"),tc=E("dns6"),ec=E("dnsaddr"),Wt=G(E("dns"),ec,Qa,tc),Pe=G(E("ip4"),E("ip6")),Pt=G(T(Pe,E("tcp")),T(Wt,E("tcp"))),Co=T(Pe,E("udp")),rc=T(Co,E("utp")),nc=T(Co,E("quic")),he=G(T(Pt,E("ws")),T(Wt,E("ws"))),de=G(T(Pt,E("wss")),T(Wt,E("wss"))),Gr=G(T(Pt,E("http")),T(Pe,E("http")),T(Wt,E("http"))),Hr=G(T(Pt,E("https")),T(Pe,E("https")),T(Wt,E("https"))),xo=G(T(he,E("p2p-webrtc-star"),E("p2p")),T(de,E("p2p-webrtc-star"),E("p2p")),T(he,E("p2p-webrtc-star")),T(de,E("p2p-webrtc-star"))),Mp=G(T(he,E("p2p-websocket-star"),E("p2p")),T(de,E("p2p-websocket-star"),E("p2p")),T(he,E("p2p-websocket-star")),T(de,E("p2p-websocket-star"))),To=G(T(Gr,E("p2p-webrtc-direct"),E("p2p")),T(Hr,E("p2p-webrtc-direct"),E("p2p")),T(Gr,E("p2p-webrtc-direct")),T(Hr,E("p2p-webrtc-direct"))),me=G(he,de,Gr,Hr,xo,To,Pt,rc,nc,Wt),Fp=G(T(me,E("p2p-stardust"),E("p2p")),T(me,E("p2p-stardust"))),It=G(T(me,E("p2p")),xo,To,E("p2p")),Eo=G(T(It,E("p2p-circuit"),It),T(It,E("p2p-circuit")),T(E("p2p-circuit"),It),T(me,E("p2p-circuit")),T(E("p2p-circuit"),me),E("p2p-circuit")),So=()=>G(T(Eo,So),Eo),le=So(),Op=G(T(le,It,le),T(It,le),T(le,It),le,It);function Ao(e){function t(r){let n;try{n=Et(r)}catch{return!1}let i=e(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return t}function T(...e){function t(r){if(r.length<e.length)return null;let n=r;return e.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:Ao(t),partialMatch:t}}function G(...e){function t(n){let i=null;return e.some(c=>{let p=typeof c=="function"?c().partialMatch(n):c.partialMatch(n);return p!=null?(i=p,!0):!1}),i}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:Ao(t),partialMatch:t}}function E(e){let t=e;function r(i){let c;try{c=Et(i)}catch{return!1}let p=c.protoNames();return p.length===1&&p[0]===t}function n(i){return i.length===0?null:i[0]===t?i.slice(1):null}return{toString:function(){return t},matches:r,partialMatch:n}}var ds=N(pe(),1);var bt=N(Lo(),1);bt.default.formatters.b=e=>e==null?"undefined":q.baseEncode(e);bt.default.formatters.t=e=>e==null?"undefined":ht.baseEncode(e);bt.default.formatters.m=e=>e==null?"undefined":Er.baseEncode(e);bt.default.formatters.p=e=>e==null?"undefined":e.toString();bt.default.formatters.c=e=>e==null?"undefined":e.toString();bt.default.formatters.k=e=>e==null?"undefined":e.toString();function Rt(e){return Object.assign((0,bt.default)(e),{error:(0,bt.default)(`${e}:error`),trace:(0,bt.default)(`${e}:trace`)})}var De=class extends Error{constructor(t,r){super(t??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Uo(e){if(e!=null){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}function Jr(e,t,r){let n=r??{},i=Uo(e);async function*c(){let p,D=()=>{p?.()};for(t.addEventListener("abort",D);;){let b;try{if(t.aborted){let{abortMessage:f,abortCode:d}=n;throw new De(f,d)}let C=new Promise((f,d)=>{p=()=>{let{abortMessage:g,abortCode:v}=n;d(new De(g,v))}});b=await Promise.race([C,i.next()]),p=null}catch(C){t.removeEventListener("abort",D);let f=C.type==="aborted"&&t.aborted;if(f&&n.onAbort!=null&&await n.onAbort(e),typeof i.return=="function")try{let d=i.return();d instanceof Promise&&d.catch(g=>{n.onReturnError!=null&&n.onReturnError(g)})}catch(d){n.onReturnError!=null&&n.onReturnError(d)}if(f&&n.returnOnAbort===!0)return;throw C}if(b.done===!0)break;yield b.value}t.removeEventListener("abort",D)}return c()}var cs=N(Xo(),1);var We=N(pe(),1);function Ve(e){return this.subnetMask<e.subnetMask?!1:this.mask(e.subnetMask)===e.mask()}function ze(e){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===e&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}var te=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,tn=/\/\d{1,2}$/;var H=class extends Error{constructor(t,r){super(t),this.name="AddressError",r!==null&&(this.parseMessage=r)}};var ee=N(en(),1),$t=N(ge(),1),R=class{constructor(t){this.groups=4,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=ze(32),this.isInSubnet=Ve,this.address=t;let r=tn.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>32)throw new H("Invalid subnet mask.");t=t.replace(tn,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new R(t),!0}catch{return!1}}parse(t){let r=t.split(".");if(!t.match(te))throw new H("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let r=t.replace(/:/g,"").padStart(8,"0"),n=[],i;for(i=0;i<8;i+=2){let c=r.slice(i,i+2);n.push(parseInt(c,16))}return new R(n.join("."))}static fromInteger(t){return R.fromHex(t.toString(16))}static fromArpa(t){let n=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new R(n)}toHex(){return this.parsedAddress.map(t=>(0,$t.sprintf)("%02x",parseInt(t,10))).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t=[],r;for(r=0;r<4;r+=2){let n=(0,$t.sprintf)("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));t.push((0,$t.sprintf)("%x",parseInt(n,16)))}return t.join(":")}bigInteger(){return new ee.BigInteger(this.parsedAddress.map(t=>(0,$t.sprintf)("%02x",parseInt(t,10))).join(""),16)}_startAddress(){return new ee.BigInteger(this.mask()+"0".repeat(32-this.subnetMask),2)}startAddress(){return R.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new ee.BigInteger("1");return R.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new ee.BigInteger(this.mask()+"1".repeat(32-this.subnetMask),2)}endAddress(){return R.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new ee.BigInteger("1");return R.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return R.fromInteger(parseInt(t.toString(),10))}mask(t){return t===void 0&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}reverseForm(t){t||(t={});let r=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?r:(0,$t.sprintf)("%s.in-addr.arpa.",r)}isMulticast(){return this.isInSubnet(new R("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(32,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(te,(0,$t.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}};var Qo={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},rn={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},nn=/([^0-9a-f:/%])/gi,on=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,sn=/\/\d{1,3}(?=%|$)/,un=/%.*$/,ts=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),es=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);var ns=N(ge(),1);function Mc(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function He(e,t=0){return e.split(":").map((n,i)=>/group-v4/.test(n)?n:(0,ns.sprintf)('<span class="hover-group group-%d">%s</span>',i+t,Mc(n)))}var Ut=N(ge(),1);function cn(e){return(0,Ut.sprintf)("(%s)",e.join("|"))}function an(e){return e.length<4?(0,Ut.sprintf)("0{0,%d}%s",4-e.length,e):e}var fn="[^A-Fa-f0-9:]";function Ze(e){let t=[];e.forEach((n,i)=>{parseInt(n,16)===0&&t.push(i)});let r=t.map(n=>e.map((i,c)=>{if(c===n){let p=c===0||c===8-1?":":"";return cn([an(i),p])}return an(i)}).join(":"));return r.push(e.map(an).join(":")),cn(r)}function pn(e,t,r){let n=t?"":":",i=r?"":":",c=[];!t&&!r&&c.push("::"),t&&r&&c.push(""),(r&&!t||!r&&t)&&c.push(":"),c.push((0,Ut.sprintf)("%s(:0{1,4}){1,%d}",n,e-1)),c.push((0,Ut.sprintf)("(0{1,4}:){1,%d}%s",e-1,i)),c.push((0,Ut.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let p=1;p<e-1;p++)for(let D=1;D<e-p;D++)c.push((0,Ut.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",D,e-D-p-1));return cn(c)}var Z=N(en(),1),X=N(ge(),1);function Xe(e){if(!e)throw new Error("Assertion failed.")}function Fc(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function Oc(e){return e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),e=e.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),e}function _c(e,t){let r=[],n=[],i;for(i=0;i<e.length;i++)i<t[0]?r.push(e[i]):i>t[1]&&n.push(e[i]);return r.concat(["compact"]).concat(n)}function ss(e){return(0,X.sprintf)("%04x",parseInt(e,16))}function is(e){return e&255}var O=class{constructor(t,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=Ve,this.isCorrect=ze(128),r===void 0?this.groups=8:this.groups=r,this.address=t;let n=sn.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>128)throw new H("Invalid subnet mask.");t=t.replace(sn,"")}else if(/\//.test(t))throw new H("Invalid subnet mask.");let i=un.exec(t);i&&(this.zone=i[0],t=t.replace(un,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new O(t),!0}catch{return!1}}static fromBigInteger(t){let r=t.toString(16).padStart(32,"0"),n=[],i;for(i=0;i<8;i++)n.push(r.slice(i*4,(i+1)*4));return new O(n.join(":"))}static fromURL(t){let r,n=null,i;if(t.indexOf("[")!==-1&&t.indexOf("]:")!==-1){if(i=es.exec(t),i===null)return{error:"failed to parse address with port",address:null,port:null};r=i[1],n=i[2]}else if(t.indexOf("/")!==-1){if(t=t.replace(/^[a-z0-9]+:\/\//,""),i=ts.exec(t),i===null)return{error:"failed to parse address from URL",address:null,port:null};r=i[1]}else r=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new O(r),port:n}}static fromAddress4(t){let r=new R(t),n=128-(32-r.subnetMask);return new O(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(t){let r=t.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new H("Invalid 'ip6.arpa' form.");let i=r.split(".").reverse();for(let c=n;c>0;c--){let p=c*4;i.splice(p,0,":")}return r=i.join(""),new O(r)}microsoftTranscription(){return(0,X.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let r=128-this.subnetMask,n=Math.abs(t-128),i=r-n;return i<0?"0":Fc(new Z.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new Z.BigInteger(this.mask()+"0".repeat(128-this.subnetMask),2)}startAddress(){return O.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new Z.BigInteger("1");return O.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new Z.BigInteger(this.mask()+"1".repeat(128-this.subnetMask),2)}endAddress(){return O.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new Z.BigInteger("1");return O.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=Qo[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&t!=="Link local"&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(rn))if(this.isInSubnet(new O(t)))return rn[t];return"Global unicast"}getBits(t,r){return new Z.BigInteger(this.getBitsBase2(t,r),2)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}getBitsBase16(t,r){let n=r-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,128)}reverseForm(t){t||(t={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?t.omitSuffix?n:(0,X.sprintf)("%s.ip6.arpa.",n):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,r=[],n=0,i=[];for(t=0;t<this.parsedAddress.length;t++){let D=parseInt(this.parsedAddress[t],16);D===0&&n++,D!==0&&n>0&&(n>1&&i.push([t-n,t-1]),n=0)}n>1&&i.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let c=i.map(D=>D[1]-D[0]+1);if(i.length>0){let D=c.indexOf(Math.max(...c));r=_c(this.parsedAddress,i[D])}else r=this.parsedAddress;for(t=0;t<r.length;t++)r[t]!=="compact"&&(r[t]=parseInt(r[t],16).toString(16));let p=r.join(":");return p=p.replace(/^compact$/,"::"),p=p.replace(/^compact|compact$/,":"),p=p.replace(/compact/,""),p}binaryZeroPad(){return this.bigInteger().toString(2).padStart(128,"0")}parse4in6(t){let r=t.split(":"),i=r.slice(-1)[0].match(te);if(i){this.parsedAddress4=i[0],this.address4=new R(this.parsedAddress4);for(let c=0;c<this.address4.groups;c++)if(/^0[0-9]+/.test(this.address4.parsedAddress[c]))throw new H("IPv4 addresses can't have leading zeroes.",t.replace(te,this.address4.parsedAddress.map(Oc).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),t=r.join(":")}return t}parse(t){t=this.parse4in6(t);let r=t.match(nn);if(r)throw new H((0,X.sprintf)("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),t.replace(nn,'<span class="parse-error">$1</span>'));let n=t.match(on);if(n)throw new H((0,X.sprintf)("Address failed regex: %s",n.join("")),t.replace(on,'<span class="parse-error">$1</span>'));let i=[],c=t.split("::");if(c.length===2){let p=c[0].split(":"),D=c[1].split(":");p.length===1&&p[0]===""&&(p=[]),D.length===1&&D[0]===""&&(D=[]);let b=this.groups-(p.length+D.length);if(!b)throw new H("Error parsing groups");this.elidedGroups=b,this.elisionBegin=p.length,this.elisionEnd=p.length+this.elidedGroups,i=i.concat(p);for(let C=0;C<b;C++)i.push("0");i=i.concat(D)}else if(c.length===1)i=t.split(":"),this.elidedGroups=0;else throw new H("Too many :: groups found");if(i=i.map(p=>(0,X.sprintf)("%x",parseInt(p,16))),i.length!==this.groups)throw new H("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(ss).join(":")}decimal(){return this.parsedAddress.map(t=>(0,X.sprintf)("%05d",parseInt(t,16))).join(":")}bigInteger(){return new Z.BigInteger(this.parsedAddress.map(ss).join(""),16)}to4(){let t=this.binaryZeroPad().split("");return R.fromHex(new Z.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){let t=this.to4(),n=new O(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new Z.BigInteger("ffff",16)).toString(),n=R.fromHex(this.getBitsBase16(32,64)),i=R.fromHex(this.getBits(96,128).xor(new Z.BigInteger("ffffffff",16)).toString(16)),c=this.getBits(64,80),p=this.getBitsBase2(64,80),D=c.testBit(15),b=c.testBit(14),C=c.testBit(8),f=c.testBit(9),d=new Z.BigInteger(p.slice(2,6)+p.slice(8,16),2).toString(10);return{prefix:(0,X.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:n.address,client4:i.address,flags:p,coneNat:D,microsoft:{reserved:b,universalLocal:f,groupIndividual:C,nonce:d},udpPort:r}}inspect6to4(){let t=this.getBitsBase16(0,16),r=R.fromHex(this.getBitsBase16(16,48));return{prefix:(0,X.sprintf)("%s",t.slice(0,4)),gateway:r.address}}to6to4(){if(!this.is4())return null;let t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new O(t)}toByteArray(){let t=this.bigInteger().toByteArray();return t.length===17&&t[0]===0?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(is)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(is))}static fromUnsignedByteArray(t){let r=new Z.BigInteger("256",10),n=new Z.BigInteger("0",10),i=new Z.BigInteger("1",10);for(let c=t.length-1;c>=0;c--)n=n.add(i.multiply(new Z.BigInteger(t[c].toString(10),10))),i=i.multiply(r);return O.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new O("2001::/32"))}is6to4(){return this.isInSubnet(new O("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(t){return t===void 0?t="":t=(0,X.sprintf)(":%s",t),(0,X.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),t.className===void 0&&(t.className=""),t.prefix===void 0&&(t.prefix="/#address="),t.v4===void 0&&(t.v4=!1);let r=this.correctForm;return t.v4&&(r=this.to4in6),t.className?(0,X.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,r.call(this),t.className):(0,X.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,r.call(this))}group(){if(this.elidedGroups===0)return He(this.address).join(":");Xe(typeof this.elidedGroups=="number"),Xe(typeof this.elisionBegin=="number");let t=[],[r,n]=this.address.split("::");r.length?t.push(...He(r)):t.push("");let i=["hover-group"];for(let c=this.elisionBegin;c<this.elisionBegin+this.elidedGroups;c++)i.push((0,X.sprintf)("group-%d",c));return t.push((0,X.sprintf)('<span class="%s"></span>',i.join(" "))),n.length?t.push(...He(n,this.elisionEnd)):t.push(""),this.is4()&&(Xe(this.address4 instanceof R),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let r=[],n=new O(this.correctForm());if(n.elidedGroups===0)r.push(Ze(n.parsedAddress));else if(n.elidedGroups===8)r.push(pn(8));else{let i=n.address.split("::");i[0].length&&r.push(Ze(i[0].split(":"))),Xe(typeof n.elidedGroups=="number"),r.push(pn(n.elidedGroups,i[0].length!==0,i[1].length!==0)),i[1].length&&r.push(Ze(i[1].split(":"))),r=[r.join(":")]}return t||(r=["(?=^|",fn,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",fn,"|$)"]),r.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}};var Nc=Rt("libp2p:ip-port-to-multiaddr"),ln={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function us(e,t){if(typeof e!="string")throw(0,We.default)(new Error(`invalid ip provided: ${e}`),ln.ERR_INVALID_IP_PARAMETER);if(typeof t=="string"&&(t=parseInt(t)),isNaN(t))throw(0,We.default)(new Error(`invalid port provided: ${t}`),ln.ERR_INVALID_PORT_PARAMETER);try{return new R(e),Et(`/ip4/${e}/tcp/${t}`)}catch{}try{let r=new O(e);return r.is4()?Et(`/ip4/${r.to4().correctForm()}/tcp/${t}`):Et(`/ip6/${e}/tcp/${t}`)}catch{let n=`invalid ip:port for creating a multiaddr: ${e}:${t}`;throw Nc.error(n),(0,We.default)(new Error(n),ln.ERR_INVALID_IP)}}var hn=N(Dt("os"),1),as=N(Dt("path"),1),Pc={ip4:"IPv4",ip6:"IPv6"};function ne(e){let t=e.getPath();return t!=null?hn.default.platform()==="win32"?{path:as.default.join("\\\\.\\pipe\\",t)}:{path:t}:e.toOptions()}function Ye(e,t,r){let n=i=>Et(`/${e}/${i}/tcp/${r}`);return(kc(t)?Lc(Pc[e]):[t]).map(n)}function kc(e){return["0.0.0.0","::"].includes(e)}var $c=hn.default.networkInterfaces();function Lc(e){let t=[];for(let[,r]of Object.entries($c))if(r!=null)for(let n of r)n.family===e&&t.push(n.address);return t}var Je=N(pe(),1),dt=Rt("libp2p:tcp:socket"),Ke=(e,t)=>{t=t??{};let r=t.socketInactivityTimeout??3e4,n=t.socketCloseTimeout??2e3;t.listeningAddr?.getPath()!=null&&(t.remoteAddr=t.listeningAddr),t.remoteAddr?.getPath()!=null&&(t.localAddr=t.remoteAddr);let i;if(t.remoteAddr!=null)i=t.remoteAddr;else{if(e.remoteAddress==null||e.remotePort==null)throw(0,Je.default)(new Error("Could not determine remote address or port"),"ERR_NO_REMOTE_ADDRESS");i=us(e.remoteAddress,e.remotePort)}let c=ne(i),p=c.path??`${c.host??""}:${c.port??""}`,{sink:D,source:b}=cs.default.duplex(e);e.setTimeout(r,()=>{dt("%s socket read timeout",p);let f;e.readable&&(f=(0,Je.default)(new Error("Socket read timeout"),"ERR_SOCKET_READ_TIMEOUT")),e.destroy(f)}),e.once("close",()=>{dt("%s socket read timeout",p),C.timeline.close==null&&(C.timeline.close=Date.now())}),e.once("end",()=>{dt("socket ended",C.remoteAddr.toString())});let C={async sink(f){t?.signal!=null&&(f=Jr(f,t.signal));try{await D(f)}catch(d){d.type!=="aborted"&&dt(d)}e.end()},source:t.signal!=null?Jr(b,t.signal):b,remoteAddr:i,timeline:{open:Date.now()},async close(){if(e.destroyed){dt("%s socket was already destroyed when trying to close",p);return}dt("%s closing socket",p),await new Promise((f,d)=>{let g=Date.now(),v=setTimeout(()=>{e.destroyed?(dt("%s is already destroyed",p),f()):(dt("%s socket close timeout after %dms, destroying it manually",p,Date.now()-g),e.destroy((0,Je.default)(new Error("Socket close timeout"),"ERR_SOCKET_CLOSE_TIMEOUT")))},n).unref();e.once("close",()=>{dt("%s socket closed",p),clearTimeout(v),f()}),e.once("error",m=>{dt("%s socket error",p,m),C.timeline.close==null&&(C.timeline.close=Date.now()),e.destroyed&&clearTimeout(v),d(m)}),e.setTimeout(n),e.end(),e.writableLength>0?e.once("drain",()=>{dt("%s socket drained",p),e.destroy()}):e.destroy()})}};return C};var fs=N(Dt("net"),1);var jt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},xt,Qe=class extends EventTarget{constructor(){super(...arguments),xt.set(this,new Map)}listenerCount(t){let r=jt(this,xt,"f").get(t);return r==null?0:r.length}addEventListener(t,r,n){super.addEventListener(t,r,n);let i=jt(this,xt,"f").get(t);i==null&&(i=[],jt(this,xt,"f").set(t,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(t,r,n){super.removeEventListener(t.toString(),r??null,n);let i=jt(this,xt,"f").get(t);i!=null&&(i=i.filter(({callback:c})=>c!==r),jt(this,xt,"f").set(t,i))}dispatchEvent(t){let r=super.dispatchEvent(t),n=jt(this,xt,"f").get(t.type);return n==null||(n=n.filter(({once:i})=>!i),jt(this,xt,"f").set(t.type,n)),r}};xt=new WeakMap;var dn=class extends Event{constructor(t,r){super(t,r),this.detail=r?.detail}},be=globalThis.CustomEvent??dn;var mt=Rt("libp2p:tcp:listener");async function mn(e){try{await e.close()}catch(t){mt.error("an error occurred closing the connection",t)}}function ps(e){let{handler:t,upgrader:r,socketInactivityTimeout:n,socketCloseTimeout:i,publicIp:c=null}=e,p,D,b=Object.assign(fs.default.createServer(f=>{f.setKeepAlive(!0),f.on("error",g=>{mt("socket error",g)});let d;try{d=Ke(f,{listeningAddr:D,socketInactivityTimeout:n,socketCloseTimeout:i})}catch(g){mt.error("inbound connection failed",g);return}mt("new inbound connection %s",d.remoteAddr);try{r.upgradeInbound(d).then(g=>{mt("inbound connection %s upgraded",d.remoteAddr),Vc(b,d,f),t?.(g),C.dispatchEvent(new be("connection",{detail:g}))}).catch(async g=>{mt.error("inbound connection failed",g),await mn(d)}).catch(g=>{mt.error("closing inbound connection failed",g)})}catch(g){mt.error("inbound connection failed",g),mn(d).catch(v=>{mt.error("closing inbound connection failed",v)})}}),{__connections:[]}),C=Object.assign(new Qe,{getAddrs:()=>{let f=[],d=b.address();if(d==null)return[];if(typeof d=="string")f=[D];else try{D.toString().startsWith("/ip4")?(f=f.concat(Ye("ip4",d.address,d.port)),c!=null&&(f=f.concat(Ye("ip4",c,d.port)))):d.family==="IPv6"&&(f=f.concat(Ye("ip6",d.address,d.port)))}catch(g){mt.error("could not turn %s:%s into multiaddr",d.address,d.port,g)}return f.map(g=>p!=null?g.encapsulate(`/p2p/${p}`):g)},listen:async f=>(D=f,p=f.getPeerId(),p==null&&(D=f.decapsulateCode(421)),await new Promise((d,g)=>{let v=ne(D);b.listen(v,m=>{if(m!=null)return g(m);mt("Listening on %s",b.address()),d()})})),close:async()=>{!b.listening||(await Promise.all(b.__connections.map(async f=>await mn(f))),await new Promise((f,d)=>{b.close(g=>g!=null?d(g):f())}))}});return b.on("listening",()=>C.dispatchEvent(new be("listening"))).on("error",f=>C.dispatchEvent(new be("error",{detail:f}))).on("close",()=>C.dispatchEvent(new be("close"))),C}function Vc(e,t,r){e.__connections.push(t);let n=()=>{e.__connections=e.__connections.filter(i=>i!==t)};r.once("close",n)}var Mt=class extends Error{constructor(t="The operation was aborted"){super(t),this.code=Mt.code,this.type=Mt.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}};var ls=Symbol.for("@libp2p/transport");var Vt=Rt("libp2p:tcp"),gn=class{constructor(t={}){this.opts=t}get[ls](){return!0}get[Symbol.toStringTag](){return"@libp2p/tcp"}async dial(t,r){let n=await this._connect(t,r);n.setKeepAlive(!0),n.on("error",p=>{Vt("socket error",p)});let i=Ke(n,{remoteAddr:t,signal:r.signal,socketInactivityTimeout:this.opts.outboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout});Vt("new outbound connection %s",i.remoteAddr);let c=await r.upgrader.upgradeOutbound(i);return Vt("outbound connection %s upgraded",i.remoteAddr),c}async _connect(t,r={}){if(r.signal?.aborted===!0)throw new Mt;return await new Promise((n,i)=>{let c=Date.now(),p=ne(t),D=p.path??`${p.host??""}:${p.port}`;Vt("dialing %j",p);let b=hs.default.connect(p),C=m=>{m.message=`connection error ${D}: ${m.message}`,v(m)},f=()=>{Vt("connection timeout %s",D);let m=(0,ds.default)(new Error(`connection timeout after ${Date.now()-c}ms`),"ERR_CONNECT_TIMEOUT");b.emit("error",m)},d=()=>{Vt("connection opened %j",p),v()},g=()=>{Vt("connection aborted %j",p),b.destroy(),v(new Mt)},v=m=>{if(b.removeListener("error",C),b.removeListener("timeout",f),b.removeListener("connect",d),r.signal!=null&&r.signal.removeEventListener("abort",g),m!=null)return i(m);n(b)};b.on("error",C),b.on("timeout",f),b.on("connect",d),r.signal!=null&&r.signal.addEventListener("abort",g)})}createListener(t){return ps({...t,socketInactivityTimeout:this.opts.inboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout,publicIp:this.opts.publicIp})}filter(t){return t=Array.isArray(t)?t:[t],t.filter(r=>r.protoCodes().includes(290)?!1:r.protoCodes().includes(400)?!0:Pt.matches(r.decapsulateCode(421)))}};return tu(Gc);})();
return Libp2PTcp}));
